# 贡献指南

## 开发工作流程

### 本地开发设置

1. 安装预提交钩子：
```bash
uv pip install pre-commit
pre-commit install
```

2. 预提交钩子将：
- 使用 ruff 格式化代码
- 使用 ruff 进行代码检查
- 使用 mypy 运行类型检查
- 使用 uv 保持依赖更新

### 推送到 GitHub 前

运行完整测试套件：
```bash
./scripts/test_ci.sh
```

此脚本将：
- 创建新的虚拟环境
- 安装所有依赖
- 运行全面测试
- 匹配 GitHub CI 环境

### 代码质量检查

预提交处理快速检查：
```bash
# 提交时自动运行，或手动运行：
pre-commit run --all-files
```

完整 CI 检查：
```bash
./scripts/test_ci.sh
```

### 最佳实践

1. **依赖管理**：
   - 使用 uv 管理依赖
   - 保持 requirements.txt 更新
   - 依赖变更后运行完整测试

2. **测试**：
   - 为新功能编写测试
   - 模拟外部 API 调用
   - 使用临时目录进行文件操作

3. **代码风格**：
   - 遵循 ruff 格式化
   - 添加类型提示
   - 保持函数专注且简短
